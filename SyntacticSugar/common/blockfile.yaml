- name: write daemon.json
  become: true
  blockinfile:
    path: /etc/docker/daemon.json
    block: |
      {
              "registry-mirrors": ["http://hub-mirror.c.163.com"]
      }
    create: yes



  blockinfile模块可以帮助我们在指定的文件中插入"一段文本"，这段文本是被标记过的，换句话说就是，我们在这段文本.上做了记号，以便在以后的操作中可以通过"标记"找到这段文本，然后修改或者删除它

  path参数:必须参数，指定要操作的文件。
  block参数:此参数用于指定我们想要操作的那"一段文本，此参数有一个别名叫"content"，使用content或block的作用是相同的
  marker参数:假如我们想要在指定文件中插入一段文本,ansible会自动为这段文本添加两个标记，一个开始标记，一个结束标记，默认情况下，开始标记为# BEGIN ANSIBLE MANAGED BLOCK,结束标记为# END ANSIBLE MANAGED BLOCK,我们可以使用marker，参数自定义"标记",比如，marker=#{ mark}test这样设置以后，开始标记变成了# BEGIN test,结束标记变成了# END test,没错, {mark}会自动被替换成开始标记和结束标记中的BEGIN和END,我们也可以插入很多段文本，为不同的段落添加不同的标记，下次通过对应的标记即可找到对应的段落
  state参数: state参数有两个可选值，present与absent,默认情况下，我们会将指定的一段文本"插入"到文件中，如果对应的文件中已经存在对应标记的文本，状认会更新对应段落，在执行插入操作或更新操作时，state的值为present,默认值就是present, 如果对应的文件中已经存在对应标记的文本并且将state的值设置为absent，则表示从文件中删除对应标记的段落
  insertafter参数:在插入一段文本时，默认会在文件的末尾插入文本，如果你想要将文本插入在某一行的后面，可以使用此参数指定对应的行，也可以使用正则表达式(python正则)，表示将文本插入在符合正则表达式的行的后面，如果有多行文本都能够匹配对应的正则表达式，则以最后一个满足正则的行为准，此参数的值还可以设置为EOF,表示将文本插入到文档末尾.
  insertbefore参数:在插入一段文本时，默认会在文件的末尾插入文本，如果你想要将文本插入在某一行的前面， 可以使用此参数指定对应的行，也可以使用正则表达式(python正则),表示将文本插入在符合正则表达式的行的前面，如果有多行文本都能够匹配对应的正则表达式，则以最后一个满足正则的行为准，此参数的值还可以设为BOF,表示将文本插入到文档开头。
  backup参数:是否在修改文件之前对文件进行备份。
  create参数:当要操作的文件并不存在时，是否创建对应的文件